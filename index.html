<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Guia Tur√≠stico</title>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
/* =============================== */
/* PALETA DARK E ESTILO GERAL */
/* =============================== */
:root {
  --bg:#0d1117;
  --card:#161b22;
  --highlight:#1f6feb;
  --text:#e6edf3;
  --muted:#9aa0a6;
  --radius:18px;
  --shadow:0 10px 35px rgba(0,0,0,.4);
}

body {
  margin:0;
  padding:0;
  background:var(--bg);
  font-family:Inter, sans-serif;
  color:var(--text);
}

/* =============================== */
/* BANNER PRINCIPAL */
/* =============================== */
.banner {
  width:100%;
  height:220px;
  overflow:hidden;
  position:relative;
}

.banner img {
  width:100%;
  height:100%;
  object-fit:cover;
  position:absolute;
  top:0; left:0;
  opacity:0;
  transition:opacity 1s ease;
}

.banner img.active {
  opacity:1;
}

/* =============================== */
/* HEADER E BUSCA */
/* =============================== */
header {
  padding:18px;
  text-align:center;
  background:var(--card);
  box-shadow:var(--shadow);
}

#busca {
  width:92%;
  padding:12px;
  margin-top:10px;
  border-radius:var(--radius);
  background:#21262d;
  border:1px solid #30363d;
  color:white;
  font-size:15px;
}

/* =============================== */
/* LISTA DE LUGARES */
/* =============================== */
#lista {
  padding:18px;
  display:grid;
  gap:20px;
}

/* CARD */
.card {
  background:var(--card);
  border-radius:var(--radius);
  padding:15px;
  box-shadow:var(--shadow);
  animation:fadeUp .6s ease;
}

@keyframes fadeUp {
  from {opacity:0; transform:translateY(20px);}
  to   {opacity:1; transform:translateY(0);}
}

/* IMAGEM */
.card img {
  width:100%;
  height:170px;
  object-fit:cover;
  border-radius:var(--radius);
  cursor:pointer;
}

/* TITULO */
.card h3 {
  margin:10px 0 3px;
}

/* HASHTAGS */
.tags {
  margin:8px 0;
}
.tags span {
  background:#1f2937;
  padding:5px 10px;
  margin-right:6px;
  border-radius:12px;
  font-size:12px;
  color:#cbd5e1;
}

/* BOT√ïES */
.btns {
  margin-top:12px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.btn {
  flex:1;
  text-align:center;
  background:var(--highlight);
  padding:10px;
  border-radius:var(--radius);
  color:white;
  font-size:14px;
  text-decoration:none;
}

/* =============================== */
/* TELA DE M√çDIA AMPLIADA */
/* =============================== */
#viewer {
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,.95);
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:999;
}

#viewer img, #viewer video {
  max-width:90%;
  max-height:80%;
  border-radius:var(--radius);
}

#voltar {
  margin-top:20px;
  padding:12px 25px;
  background:var(--highlight);
  border-radius:var(--radius);
  color:white;
  font-size:16px;
}
</style>

</head>
<body>

<!-- ================================== -->
<!-- BANNER PRINCIPAL -->
<!-- ================================== -->
<div class="banner" id="banner"></div>

<!-- ================================== -->
<!-- HEADER -->
<!-- ================================== -->
<header>
  <h2>üåé Guia Tur√≠stico</h2>
  <input id="busca" placeholder="Buscar por lugar ou #hashtag..." oninput="filtrar()">
</header>

<!-- LISTA DE LUGARES -->
<div id="lista"></div>

<!-- VIEWER DE FOTOS/VIDEOS -->
<div id="viewer">
  <div id="mediaArea"></div>
  <button id="voltar" onclick="fecharViewer()">Voltar</button>
</div>

<script>
const API = "URL_DO_GAS_AQUI"; // coloque aqui a URL do seu GAS

let todosLugares = [];

/* ============================
   CARREGAR BANNERS
===============================*/
const bannerImgs = [
  "https://images.unsplash.com/photo-1549880338-65ddcdfd017b",
  "https://images.unsplash.com/photo-1505765050516-f72dcac9c60e",
  "https://images.unsplash.com/photo-1469474968028-56623f02e42e",
  "https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1",
  "https://images.unsplash.com/photo-1519817650390-64a93db511aa"
];

function carregarBanners(){
  const b = document.getElementById("banner");
  bannerImgs.forEach((url,i)=>{
    const img = document.createElement("img");
    img.src = url;
    if(i===0) img.classList.add("active");
    b.appendChild(img);
  });

  let atual = 0;
  setInterval(()=>{
    const imgs = document.querySelectorAll(".banner img");
    imgs[atual].classList.remove("active");
    atual = (atual+1) % imgs.length;
    imgs[atual].classList.add("active");
  }, 3500);
}
carregarBanners();


/* ============================
   CARREGAR DADOS
===============================*/
async function carregar(){
  const req = await fetch(API);
  const data = await req.json();

  todosLugares = data.lugares;
  render();
}
carregar();

/* ============================
   RENDERIZAR LISTA
===============================*/
function render(){
  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  todosLugares.forEach(l=>{
    const tags = (l.hashtags || "").split(",").map(t=>t.trim()).filter(t=>t);

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${l.foto}" onclick="abrirViewer('${l.foto}','img')">

      <h3>${l.nome}</h3>
      <p style="color:#9ca3af;font-size:14px">${l.descricao}</p>

      <div class="tags">
        ${tags.map(t=>`<span>#${t}</span>`).join("")}
      </div>

      <div class="btns">
        <a class="btn" href="${l.mapa}" target="_blank">üìç Ver Local</a>
        <a class="btn" href="${l.site}" target="_blank">üåê Visitar</a>
        <a class="btn" href="${l.reserva}" target="_blank">üìÖ Reservar</a>
        <a class="btn" href="https://wa.me/${l.whatsapp}" target="_blank">üí¨ WhatsApp</a>
      </div>
    `;

    lista.appendChild(card);
  });
}

/* ============================
   FILTRO / BUSCAR / #HASHTAGS
===============================*/
function filtrar(){
  const txt = document.getElementById("busca").value.toLowerCase();

  const filtrado = todosLugares.filter(l => 
    l.nome.toLowerCase().includes(txt) ||
    l.descricao.toLowerCase().includes(txt) ||
    (l.hashtags || "").toLowerCase().includes(txt.replace("#",""))
  );

  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  filtrado.forEach(l=>{
    const tags = (l.hashtags || "").split(",").map(t=>t.trim()).filter(t=>t);

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${l.foto}" onclick="abrirViewer('${l.foto}','img')">

      <h3>${l.nome}</h3>
      <p style="color:#9ca3af;font-size:14px">${l.descricao}</p>

      <div class="tags">
        ${tags.map(t=>`<span>#${t}</span>`).join("")}
      </div>

      <div class="btns">
        <a class="btn" href="${l.mapa}" target="_blank">üìç Ver Local</a>
        <a class="btn" href="${l.site}" target="_blank">üåê Visitar</a>
        <a class="btn" href="${l.reserva}" target="_blank">üìÖ Reservar</a>
        <a class="btn" href="https://wa.me/${l.whatsapp}" target="_blank">üí¨ WhatsApp</a>
      </div>
    `;

    lista.appendChild(card);
  }); 
}

/* ============================
   VIEWER DE M√çDIA
===============================*/
function abrirViewer(src, tipo){
  const media = document.getElementById("mediaArea");
  media.innerHTML = "";

  if(tipo==="img"){
    media.innerHTML = `<img src="${src}">`;
  } else {
    media.innerHTML = `<video controls src="${src}"></video>`;
  }

  document.getElementById("viewer").style.display = "flex";
}

function fecharViewer(){
  document.getElementById("viewer").style.display = "none";
}
</script>

</body>
</html>
